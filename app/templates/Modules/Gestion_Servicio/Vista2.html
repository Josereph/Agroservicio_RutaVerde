{% extends "layouts/base.html" %}

{% block title %}Agroservicio Ruta Verde - Gestión de Servicios{% endblock %}

{% block content %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/vista2.css') }}">
        
    <div class="container mt-5">
        <h1 class="mb-4 display-4 text-primary-green">Gestión de Servicios</h1>

        <ul class="nav nav-tabs" id="serviciosTab" role="tablist">
            <li class="nav-item" role="presentation">
<<<<<<< HEAD
                <button class="nav-link active tab-link" id="registro-tab" data-bs-toggle="tab" data-bs-target="#registro" type="button" role="tab" aria-controls="registro" aria-selected="true">
=======
                <button class="nav-link *active* tab-link" id="registro-tab" data-bs-toggle="tab" data-bs-target="#registro" type="button" role="tab" aria-controls="registro" aria-selected="true">
>>>>>>> Gestion_Evidencia_Documentacion
                    Registrar Nuevo Servicio
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link tab-link" id="consulta-tab" data-bs-toggle="tab" data-bs-target="#consulta" type="button" role="tab" aria-controls="consulta" aria-selected="false">
                    Servicios Existentes
                </button>
            </li>
        </ul>

        <div class="tab-content tab-content-card" id="serviciosTabContent">
<<<<<<< HEAD
            <div class="tab-pane fade show active" id="registro" role="tabpanel" aria-labelledby="registro-tab">
=======
            <div class="tab-pane fade *show active*" id="registro" role="tabpanel" aria-labelledby="registro-tab">
>>>>>>> Gestion_Evidencia_Documentacion
                <h2 class="h5 mb-4 text-secondary-title">Completa los datos para registrar un nuevo envío:</h2>
                
                <form action="#" method="POST">
                    <div class="row g-4">
                        <div class="col-12"><h3 class="h6 text-section-header">Información del Cliente y Contacto</h3></div>
                        
                        <div class="col-md-4">
                            <label for="cliente_nombre" class="form-label text-inter-regular">Nombre del Cliente</label>
                            <input type="text" class="form-control custom-input" id="cliente_nombre" name="cliente_nombre" placeholder="Nombre completo" required>
                        </div>
                        
                        <div class="col-md-4">
                            <label for="cliente_email" class="form-label text-inter-regular">Correo Electrónico (Para Cliente)</label>
                            <input type="email" class="form-control custom-input" id="cliente_email" name="cliente_email" placeholder="Para factura y notificaciones" required>
                        </div>

                        <div class="col-md-4">
                            <label for="cliente_dui" class="form-label text-inter-regular">DUI de Cliente/Empresa</label>
                            <input type="text" class="form-control custom-input" id="cliente_dui" name="cliente_dui" placeholder="Documento Único de Identidad" required>
                        </div>

                        <div class="col-12"><h3 class="h6 text-section-header mt-3">Detalles de la Carga</h3></div>
                        
                        <div class="col-md-4">
                            <label for="tipo_servicio" class="form-label text-inter-regular">Tipo de Servicio</label>
                            <select class="form-select custom-input" id="tipo_servicio" name="tipo_servicio" required>
                                <option value="">Seleccione...</option>
                                <option value="1">Entrega de producto</option>
                                <option value="2">Retiro de producto</option>
                            </select>
                        </div>

                        <div class="col-md-4">
                            <label for="peso_carga" class="form-label text-inter-regular">Peso de la Carga (kg)</label>
                            <input type="number" step="0.01" class="form-control custom-input" id="peso_carga" name="peso_carga" min="0.01" placeholder="Ej: 50.50" required>
                        </div>
                        
                        <div class="col-md-4">
                            <label for="id_fragilidad" class="form-label text-inter-regular">Nivel de Fragilidad</label>
                            <select class="form-select custom-input" id="id_fragilidad" name="id_fragilidad" required>
                                <option value="">Seleccione...</option>
                                <option value="1">Muy Alta</option>
                                <option value="2">Alta</option>
                                <option value="3">Media</option>
                                <option value="4">Baja</option>
                                <option value="5">Nula</option>
                            </select>
                        </div>
                        
                        <div class="col-12">
                            <label for="descripcion_carga" class="form-label text-inter-regular">Descripción de la Carga</label>
                            <textarea class="form-control custom-input" id="descripcion_carga" name="descripcion_carga" rows="2" placeholder="Detalles, productos específicos, o requerimientos especiales (Ej: 10 sacos de Maíz Híbrido, 5 bidones de Herbicida)"></textarea>
                        </div>

                        <div class="col-12"><h3 class="h6 text-section-header mt-3">Logística, Asignación y Tiempos</h3></div>

                        <div class="col-md-6">
                            <label for="ubicacion_origen" class="form-label text-inter-regular">Ubicación de Origen</label>
                            <input type="text" class="form-control custom-input" id="ubicacion_origen" name="ubicacion_origen" placeholder="Dirección o punto de recolección" required>
                        </div>

                        <div class="col-md-6">
                            <label for="ubicacion_destino" class="form-label text-inter-regular">Ubicación de Destino</label>
                            <input type="text" class="form-control custom-input" id="ubicacion_destino" name="ubicacion_destino" placeholder="Lugar de entrega final" required>
                        </div>

                        <div class="col-md-6">
                            <label for="id_vehiculo" class="form-label text-inter-regular">Vehículo Asignado (ID_Vehiculo)</label>
                            <input type="number" class="form-control custom-input" id="id_vehiculo" name="id_vehiculo" placeholder="Ej: 1 (Camión pequeño)" required>
                            <small class="text-muted small-text">*ID del vehículo para el cargamento.</small>
                        </div>

                        <div class="col-md-6">
                            <label for="id_conductor" class="form-label text-inter-regular">Conductor Asignado (id_conductor)</label>
                            <input type="number" class="form-control custom-input" id="id_conductor" name="id_conductor" placeholder="Ej: 5 (Nombre del Chofer)" required>
                            <small class="text-muted small-text">*ID del conductor responsable.</small>
                        </div>

                        <div class="col-md-6">
                            <label for="fecha_pedido" class="form-label text-inter-regular">Fecha de Pedido (Registro)</label>
                            <input type="date" class="form-control custom-input" id="fecha_pedido" name="fecha_pedido" required>
                        </div>

                        <div class="col-md-6">
                            <label for="fecha_entrega" class="form-label text-inter-regular">Fecha Límite de Entrega</label>
                            <input type="date" class="form-control custom-input" id="fecha_entrega" name="fecha_entrega" required>
                            <small class="text-muted small-text">*La fecha de entrega debe ser posterior a la fecha de pedido.</small>
                        </div>

                        <div class="col-12"><h3 class="h6 text-section-header mt-3">Pago y Precio</h3></div>

                        <div class="col-md-6">
                            <label for="precio_total" class="form-label text-inter-regular">Precio Total ($)</label>
                            <input type="number" step="0.01" class="form-control custom-input" id="precio_total" name="precio_total" min="0.00" placeholder="0.00" required>
                        </div>

                        <div class="col-md-6">
                            <label for="metodo_pago" class="form-label text-inter-regular">Método de Pago</label>
                            <select class="form-select custom-input" id="metodo_pago" name="metodo_pago" required>
                                <option value="">Seleccione...</option>
                                <option value="efectivo">Efectivo</option>
                                <option value="tarjeta">Tarjeta</option>
                                <option value="transferencia">Transferencia Bancaria</option>
                            </select>
                        </div>

                        <div class="col-12 mt-4">
                            <button type="submit" class="btn btn-lg w-100 primary-submit-btn">
                                <i></i> Registrar Servicio
                            </button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="tab-pane fade" id="consulta" role="tabpanel" aria-labelledby="consulta-tab">
                <h2 class="h5 mb-4 text-secondary-title">Listado de Envíos y su Estado:</h2>
                
                <div class="row mb-3 align-items-center">
                    <div class="col-md-4">
                        <input type="text" class="form-control custom-input" placeholder="Buscar por ID, Cliente o Estado...">
                    </div>
                    <div class="col-md-8 text-end">
                        <button class="btn btn-outline-secondary me-2 btn-secondary-action">Filtrar por Estado</button>
                        <button class="btn btn-outline-secondary btn-secondary-action">Exportar Reporte</button>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table table-hover align-middle custom-table">
                        <thead class="thead-custom">
                            <tr>
                                <th>ID Servicio</th>
                                <th>Cliente</th>
                                <th>Producto</th>
                                <th>Fecha Entrega</th>
                                <th>Estado del Cargamento</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>SRV-001</td>
                                <td>José Diego C.</td>
                                <td>Semilla Maíz</td>
                                <td>2025-11-28</td>
                                <td><span class="badge bg-warning text-dark">En Camión</span></td>
                                <td>
                                    <button class="btn btn-sm btn-success me-1" title="Editar Servicio"><i>Editar</i></button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar Servicio"><i>Eliminar</i></button>
                                </td>
                            </tr>
                            <tr>
                                <td>SRV-002</td>
                                <td>René A. Hernández</td>
                                <td>Abono Orgánico</td>
                                <td>2025-11-20</td>
                                <td><span class="badge bg-primary">En Ruta</span></td>
                                <td>
                                    <button class="btn btn-sm btn-success me-1"><i>Editar</i></button>
                                    <button class="btn btn-sm btn-danger"><i>Eliminar</i></button>
                                </td>
                            </tr>
                            <tr>
                                <td>SRV-003</td>
                                <td>Joseph Orellana</td>
                                <td>Fertilizante Líquido</td>
                                <td>2025-11-15</td>
                                <td><span class="badge bg-success">Entregado</span></td>
                                <td>
                                    <button class="btn btn-sm btn-success me-1" disabled><i>Editar</i></button>
                                    <button class="btn btn-sm btn-danger" disabled><i>Eliminar</i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/Validacion.js') }}" defer></script>
{% endblock %}